(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,a=0;a<n.length;a++)if(n[a].identifier===e){t=a;break}return t}function a(e,a){for(var o={},i=[],s=0;s<e.length;s++){var d=e[s],l=a.base?d[0]+a.base:d[0],c=o[l]||0,m="".concat(l," ").concat(c);o[l]=c+1;var u=t(m),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)n[u].references++,n[u].updater(h);else{var p=r(h,a);a.byIndex=s,n.splice(s,0,{identifier:m,updater:p,references:1})}i.push(m)}return i}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=t(o[i]);n[s].references--}for(var d=a(e,r),l=0;l<o.length;l++){var c=t(o[l]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}o=d}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",a=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),a&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),a&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);a&&i[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),n.push(c))}},n}},417:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(601),r=t.n(a),o=t(314),i=t.n(o)()(r());i.push([e.id,'/*! HTML5 Boilerplate v9.0.1 | MIT License | https://html5boilerplate.com/ */\n\n/* main.css 3.0.0 | MIT License | https://github.com/h5bp/main.css#readme */\n/*\n * What follows is the result of much research on cross-browser styling.\n * Credit left inline and big thanks to Nicolas Gallagher, Jonathan Neal,\n * Kroc Camen, and the H5BP dev community and team.\n */\n\n/* ==========================================================================\n   Base styles: opinionated defaults\n   ========================================================================== */\n\nhtml {\n  color: #222;\n  font-size: 1em;\n  line-height: 1.4;\n  font-family: \'Montserrat\', sans-serif;\n}\n\n/*\n * Remove text-shadow in selection highlight:\n * https://twitter.com/miketaylr/status/12228805301\n *\n * Customize the background color to match your design.\n */\n\n::-moz-selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\n::selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\n/*\n * A better looking default horizontal rule\n */\n\nhr {\n  display: block;\n  height: 1px;\n  border: 0;\n  border-top: 1px solid #ccc;\n  margin: 1em 0;\n  padding: 0;\n}\n\n/*\n * Remove the gap between audio, canvas, iframes,\n * images, videos and the bottom of their containers:\n * https://github.com/h5bp/html5-boilerplate/issues/440\n */\n\naudio,\ncanvas,\niframe,\nimg,\nsvg,\nvideo {\n  vertical-align: middle;\n}\n\n/*\n * Remove default fieldset styles.\n */\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n/*\n * Allow only vertical resizing of textareas.\n */\n\ntextarea {\n  resize: vertical;\n}\n\n/* ==========================================================================\n   Author\'s custom styles\n   ========================================================================== */\n\n/* ==========================================================================\n   Helper classes\n   ========================================================================== */\n\n/*\n * Hide visually and from screen readers\n */\n\n.hidden,\n[hidden] {\n  display: none !important;\n}\n\n/*\n * Hide only visually, but have it available for screen readers:\n * https://snook.ca/archives/html_and_css/hiding-content-for-accessibility\n *\n * 1. For long content, line feeds are not interpreted as spaces and small width\n *    causes content to wrap 1 word per line:\n *    https://medium.com/@jessebeach/beware-smushed-off-screen-accessible-text-5952a4c2cbfe\n */\n\n.visually-hidden {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n  /* 1 */\n}\n\n/*\n * Extends the .visually-hidden class to allow the element\n * to be focusable when navigated to via the keyboard:\n * https://www.drupal.org/node/897638\n */\n\n.visually-hidden.focusable:active,\n.visually-hidden.focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  white-space: inherit;\n  width: auto;\n}\n\n/*\n * Hide visually and from screen readers, but maintain layout\n */\n\n.invisible {\n  visibility: hidden;\n}\n\n/*\n * Clearfix: contain floats\n *\n * The use of `table` rather than `block` is only necessary if using\n * `::before` to contain the top-margins of child elements.\n */\n\n.clearfix::before,\n.clearfix::after {\n  content: "";\n  display: table;\n}\n\n.clearfix::after {\n  clear: both;\n}\n\n/* ==========================================================================\n   EXAMPLE Media Queries for Responsive Design.\n   These examples override the primary (\'mobile first\') styles.\n   Modify as content requires.\n   ========================================================================== */\n\n@media only screen and (min-width: 35em) {\n  /* Style adjustments for viewports that meet the condition */\n}\n\n@media print,\n  (-webkit-min-device-pixel-ratio: 1.25),\n  (min-resolution: 1.25dppx),\n  (min-resolution: 120dpi) {\n  /* Style adjustments for high resolution devices */\n}\n\n/* ==========================================================================\n   Print styles.\n   Inlined to avoid the additional HTTP request:\n   https://www.phpied.com/delay-loading-your-print-css/\n   ========================================================================== */\n\n@media print {\n  *,\n  *::before,\n  *::after {\n    background: #fff !important;\n    color: #000 !important;\n    /* Black prints faster */\n    box-shadow: none !important;\n    text-shadow: none !important;\n  }\n\n  a,\n  a:visited {\n    text-decoration: underline;\n  }\n\n  a[href]::after {\n    content: " (" attr(href) ")";\n  }\n\n  abbr[title]::after {\n    content: " (" attr(title) ")";\n  }\n\n  /*\n   * Don\'t show links that are fragment identifiers,\n   * or use the `javascript:` pseudo protocol\n   */\n  a[href^="#"]::after,\n  a[href^="javascript:"]::after {\n    content: "";\n  }\n\n  pre {\n    white-space: pre-wrap !important;\n  }\n\n  pre,\n  blockquote {\n    border: 1px solid #999;\n    page-break-inside: avoid;\n  }\n\n  tr,\n  img {\n    page-break-inside: avoid;\n  }\n\n  p,\n  h2,\n  h3 {\n    orphans: 3;\n    widows: 3;\n  }\n\n  h2,\n  h3 {\n    page-break-after: avoid;\n  }\n}\n\n',""]);const s=i},469:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(601),r=t.n(a),o=t(314),i=t.n(o)()(r());i.push([e.id,':root{--primary-bg: #2f3b45;--secondary-bg: #3b4a56;--accent: #5c6b78;--text-color: #f1f1f1;--button-bg: #607d8b;--button-hover: #78909c;--border-radius: 6px;--shadow: 0 4px 6px rgba(0, 0, 0, 0.3);--transition: 0.2s ease-in-out;--font-stack: "Segoe UI", Roboto, sans-serif;--control-width: 300px}body{background-color:var(--primary-bg);color:var(--text-color);font-family:var(--font-stack);margin:0;padding:2rem;padding-top:1rem;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#title{margin-top:0}#controlContainer{display:flex;flex-direction:column;width:var(--control-width);padding:1rem;gap:1rem;background-color:var(--secondary-bg);border-radius:var(--border-radius);box-shadow:var(--shadow);margin-bottom:1.75rem;align-items:center;box-sizing:border-box}#controlContainer>*{width:90%}.file-upload{display:flex;align-items:center;justify-content:space-between;gap:1rem;cursor:pointer}.file-btn{background-color:var(--button-bg);color:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);transition:background-color var(--transition);cursor:pointer;padding:.5em 1em;border-radius:2.5px;font-weight:bold}.file-btn:hover{background-color:var(--button-hover)}.file-label{font-size:.9rem;color:var(--text-color);opacity:.8}.checkboxContainer{display:flex;justify-content:space-between}input[type=checkbox]{accent-color:var(--button-bg);transform:scale(1.2);margin-right:.5rem}.filename-input{display:flex;justify-content:space-between;align-items:center}.filename-input .label-text{width:auto;margin-right:10px}.filename-input input{flex-grow:1}label{font-size:.95rem;display:flex;align-items:center;gap:.5rem}button#download{background-color:var(--button-bg);color:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);transition:background-color var(--transition);cursor:pointer;border:none;padding:.6em 1.2em;font-size:1rem}button#download:hover{background-color:var(--button-hover)}#canvasContainer{width:90%;padding:.25rem;background-color:var(--secondary-bg);border-radius:var(--border-radius);box-shadow:var(--shadow)}#canvas{width:100%;height:auto;display:block;border-radius:var(--border-radius)}.hidden{display:none}#imageListContainer{width:var(--control-width);box-sizing:border-box}#imageListContainer p{text-align:center}#imageListContainer.hidden{display:none}#imageList{display:flex;flex-direction:column;gap:10px;margin:10px 0;padding:10px;width:100%;background-color:var(--secondary-bg);border-radius:var(--border-radius);box-shadow:var(--shadow);min-height:50px;box-sizing:border-box}.preview-container{flex:1;width:40%;margin-left:10px}.image-thumbnail{display:flex;align-items:center;justify-content:space-between;padding:8px;background-color:var(--button-bg);border-radius:2.5px;cursor:grab;touch-action:none;user-select:none}.image-thumbnail img{max-width:50px;max-height:50px;margin-right:10px}.image-thumbnail .thumbnail-label{text-align:right}.image-thumbnail.dragging{opacity:.5;border:1px dashed #999}.up-arrow,.down-arrow{background-color:var(--accent);color:#fff;border:none;border-radius:3px;cursor:pointer;width:24px;height:24px;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;transition:background-color var(--transition)}.up-arrow:hover,.down-arrow:hover{background-color:var(--button-hover)}.disabled{opacity:.3;cursor:pointer}@media screen and (max-width: 600px){:root{--control-width: 90%}body{padding:1rem .8rem 2rem}#title{margin-top:0}#controlContainer{width:var(--control-width);min-width:var(--control-width);align-content:space-around;padding:1rem .25rem}#controlContainer>*{width:90%}.file-upload{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:rgba(0,0,0,0)}.file-upload:focus{outline:none}.file-label{font-size:1.25rem;font-weight:bold}#canvasContainer{width:90%;min-width:90%}#imageListContainer{width:var(--control-width);min-width:var(--control-width)}}',""]);const s=i},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var a=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,r&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(a,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(a){var r=n[a];if(void 0!==r)return r.exports;var o=n[a]={id:a,exports:{}};return e[a](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var a=t(72),r=t.n(a),o=t(825),i=t.n(o),s=t(659),d=t.n(s),l=t(56),c=t.n(l),m=t(540),u=t.n(m),h=t(113),p=t.n(h),g=t(417),f={};f.styleTagTransform=p(),f.setAttributes=c(),f.insert=d().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=u(),r()(g.A,f),g.A&&g.A.locals&&g.A.locals;var b=t(469),v={};v.styleTagTransform=p(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=u(),r()(b.A,v),b.A&&b.A.locals&&b.A.locals;const w=document.getElementById("canvas"),y=document.getElementById("canvasContainer"),x=w.getContext("2d"),L=document.getElementById("upload"),k=document.getElementById("scaleCheckbox"),E=document.getElementById("debug"),C=document.getElementById("download"),T=document.getElementById("imageListContainer"),I=document.getElementById("imageList"),A=["testimg/1.jpg","testimg/2.png","testimg/rect.png"];let M=[],j=null,H=null;const z=()=>y.classList.add("hidden");z(),T.classList.add("hidden");const B=e=>new Promise(((n,t)=>{const a=new FileReader;a.onload=()=>{const r=new Image;r.onload=()=>{r.originalName=e.name,n(r)},r.onerror=()=>t(`Failed to load image: ${e.name}`),r.src=a.result},a.onerror=()=>t(`Failed to read file: ${e.name}`),a.readAsDataURL(e)})),S=async()=>{try{z(),T.classList.add("hidden"),I.innerHTML="",M=await Promise.all(A.map((e=>new Promise(((n,t)=>{const a=new Image;a.onload=()=>n(a),a.onerror=()=>t(`Failed to load image: ${e}`),a.src=e}))))),M.length>0&&(N(),q())}catch(e){console.error("Error loading test images:",e)}},N=()=>{T.classList.remove("hidden"),M.forEach(((e,n)=>{const t=document.createElement("div");t.className="image-thumbnail",t.draggable=!0,t.dataset.index=n;const a=document.createElement("button");a.className="up-arrow",a.innerHTML="&uarr;",0===n?(a.disabled=!0,a.classList.add("disabled")):n>0&&(a.disabled=!1,a.classList.remove("disabled")),a.addEventListener("click",(()=>{(e=>{e<=0||([M[e],M[e-1]]=[M[e-1],M[e]],I.innerHTML="",N(),q())})(n)}));const r=document.createElement("button");r.className="down-arrow",r.innerHTML="&darr;",n===M.length-1?(r.disabled=!0,r.classList.add("disabled")):n<M.length-1&&(r.disabled=!1,r.classList.remove("disabled")),r.addEventListener("click",(()=>{(e=>{e>=M.length-1||([M[e],M[e+1]]=[M[e+1],M[e]],I.innerHTML="",N(),q())})(n)}));const o=document.createElement("div");o.className="preview-container";const i=document.createElement("img");i.src=e.src;const s=e.originalName||e.src.split("/").pop(),d=document.createElement("span");d.className="thumbnail-label",d.textContent=`${s}`,o.appendChild(i),o.appendChild(d),t.appendChild(a),t.appendChild(o),t.appendChild(r),I.appendChild(t),t.addEventListener("dragstart",P),t.addEventListener("dragover",R),t.addEventListener("dragend",D)}))},P=e=>{j=e.target.closest(".image-thumbnail"),H=parseInt(j.dataset.index),j.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",j)},R=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move";const n=e.target.closest(".image-thumbnail");if(!n||n===j)return;const t=parseInt(n.dataset.index);H<t?I.insertBefore(j,n.nextSibling):I.insertBefore(j,n),F()},D=()=>{j&&(j.classList.remove("dragging"),j=null)},F=()=>{const e=Array.from(I.children),n=e.map((e=>M[parseInt(e.dataset.index)]));M=n,e.forEach(((e,n)=>{e.dataset.index=n;const t=e.querySelector(".up-arrow"),a=e.querySelector(".down-arrow");0===n?(t.disabled=!0,t.classList.add("disabled")):0!==n&&(t.disabled=!1,t.classList.remove("disabled")),n===M.length-1?(a.disabled=!0,a.classList.add("disabled")):n!==M.length-1&&(a.disabled=!1,a.classList.remove("disabled"))})),q()},q=()=>{if(0===M.length)return void z();y.classList.remove("hidden");const e=U(M),n=$(M,e),t=O(M,n);_(e,t),J(M,n,e,t)},U=e=>k.checked?Math.max(...e.map((e=>e.width))):Math.min(...e.map((e=>e.width))),$=(e,n)=>e.map((e=>n/e.width)),O=(e,n)=>e.map(((e,t)=>e.height*n[t])),_=(e,n)=>{w.width=e,w.height=n.reduce(((e,n)=>e+n),0)},J=(e,n,t,a)=>{let r=0;e.forEach(((e,n)=>{x.drawImage(e,0,r,t,a[n]),r+=a[n]}))};function G(e){const n=e.target.files;n.length&&((async e=>{try{z(),T.classList.add("hidden"),I.innerHTML="",M=await Promise.all(Array.from(e).map(B)),M.length>0?(N(),q()):z()}catch(e){console.error(e),z()}})(n),e.target.value="")}L.removeEventListener("change",G),L.addEventListener("change",G),k.addEventListener("change",q),C.addEventListener("click",(()=>{const e=document.getElementById("filename").value.trim()||"joinedimage",n=w.toDataURL("image/jpeg",.92),t=document.createElement("a");t.href=n,t.download=`${e}.jpg`,t.click()})),E.addEventListener("change",(e=>{e.target.checked?S():(x.clearRect(0,0,w.width,w.height),z(),T.classList.add("hidden"),I.innerHTML="",M=[])})),E.checked&&S()})();